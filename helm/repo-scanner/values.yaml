# Default values for repo-scanner Helm chart

# Image configuration
image:
  repository: repo-scanner
  tag: "latest"
  pullPolicy: IfNotPresent

# API server configuration
api:
  replicas: 2
  port: 8080

  # Resource limits and requests
  resources:
    requests:
      memory: "512Mi"
      cpu: "250m"
    limits:
      memory: "1Gi"
      cpu: "500m"

  # Health check configuration
  healthCheck:
    enabled: true
    path: /health
    initialDelaySeconds: 30
    periodSeconds: 10

# Service configuration
service:
  type: ClusterIP
  port: 80
  targetPort: 8080

# Ingress configuration
ingress:
  enabled: false
  className: nginx
  annotations: {}
  hosts:
    - host: repo-scanner.local
      paths:
        - path: /
          pathType: Prefix
  tls: []

# Monitoring configuration
monitoring:
  enabled: true
  serviceMonitor:
    enabled: true
    interval: 30s
    scrapeTimeout: 10s

  prometheusRule:
    enabled: true

  grafana:
    dashboard:
      enabled: true

# Alerting configuration
alerting:
  memoryThreshold: 80
  cpuThreshold: 70
  errorRateThreshold: 0.1
  scanTimeThreshold: 30

# Storage configuration
storage:
  enabled: true
  size: 50Gi
  className: standard

# Autoscaling configuration
autoscaling:
  enabled: true
  minReplicas: 2
  maxReplicas: 10
  targetCPUUtilizationPercentage: 70
  targetMemoryUtilizationPercentage: 80

# Network policy configuration
networkPolicy:
  enabled: true

# Pod disruption budget
podDisruptionBudget:
  enabled: true
  minAvailable: 1

# Configuration overrides
config:
  logLevel: "INFO"
  maxWorkers: "8"

# Security configuration
security:
  enabled: true
  runAsNonRoot: true
  runAsUser: 1000
  runAsGroup: 1000
  fsGroup: 1000
  readOnlyRootFilesystem: true
  allowPrivilegeEscalation: false
  capabilities:
    drop:
    - ALL
  seccompProfile:
    type: RuntimeDefault

# RBAC configuration
rbac:
  enabled: true
  serviceAccount:
    create: true
    name: repo-scanner-sa

# Pod Security Policy (deprecated but still used in some clusters)
podSecurityPolicy:
  enabled: false

# Network policy configuration
networkPolicy:
  enabled: true
  allowExternal: false
  additionalPolicies: []
  # databasePassword: ""

# Node selector, tolerations, and affinity
nodeSelector: {}
tolerations: []
affinity: {}